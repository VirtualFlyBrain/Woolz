'\" te
.\" ident MRC HGU $Id$
.\"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
.\" Project:    Woolz							"
.\" Title:      WlzCentreOfMass.3		                      	"
.\" Date:       March 1999	                                    	"
.\" Author:     Bill Hill 				    		"
.\" Copyright:	1999 Medical Research Council, UK.			"
.\"		All rights reserved.					"
.\" Address:	MRC Human Genetics Unit,				"
.\"		Western General Hospital,				"
.\"		Edinburgh, EH4 2XU, UK.					"
.\" Purpose:    Calculates the centre of mass of a Woolz domain object.	"
.\" $Revision$
.\" Maintenance:Log changes below, with most recent at top of list.	"
.\"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
.TH "WlzCentreOfMass" 3 "%G%" "MRC HGU Woolz" "Woolz Procedure Library"
.SH NAME
WlzCentreOfMass \- Calculates centre of mass.
.SH SYNOPSIS
.LP
.B #include <Wlz.h>
.LP
.BI "WlzDVertex2 WlzCentreOfMass2D(WlzObject *" "srcObj" ,
.in +4m
.BI "int " "binObjFlag" ,
.br
.BI "double *" "dstMass"
.br
.BI "WlzErrorNum *" "dstErrNum" ");"
.in -4m
.LP
.BI "WlzDVertex3 WlzCentreOfMass3D(WlzObject *" "srcObj" ,
.in +4m
.br
.BI "int " "binObjFlag" ,
.br
.BI "double *" "dstMass"
.br
.BI "WlzErrorNum *" "dstErrNum" ");"
.in -4m
.SH ARGUMENTS
.TS
tab(^);
lI l.
srcObj^source object pointer
binObjFlag^binary object flag
dstMass^destination pointer for mass, may be NULL
dstErrNum^destination pointer for error number, may be NULL
.TE
.SH MT-LEVEL
.LP
Safe
.SH DESCRIPTION
WlzCentreOfMass2D and WlzCentreOfMass3D calculate the centre of mass of
Woolz 2D and 3D domain objects.
If the object has values and the binary object flag is
not set then the centre of mass is calculated using
the grey level information:
.sp 1
.EQ
c sub x = {sum from x { sum from y { sum from z { x G(x, y, z) } } } } over
          {sum from x { sum from y { sum from z { G(x, y, z) } } } }
.EN
.sp 1
.EQ
c sub y = {sum from x { sum from y { sum from z { y G(x, y, z) } } } } over
          {sum from x { sum from y { sum from z { G(x, y, z) } } } }
.EN
.sp 1
.EQ
c sub z = {sum from x { sum from y { sum from z { z G(x, y, z) } } } } over
          {sum from x { sum from y { sum from z { G(x, y, z) } } } }
.EN
.sp 1
Where
.EQ
c sub x, c sub y, c sub z
.EN
is the centre of mass.
.LP
WlzCentreOfMass3D will calculate the centre of mass of both
2D and 3D domain objects,
whereas
WlzCentreOfMass2D will only accept 2D domain objects.
.SH EXAMPLES
.LP
.ps -2
.cs R 24
.nf
/*
 * Simple example of using WlzCentreOfMass3D() to caclulate the centre
 * of mass of an object read from the standard input.
 */

#include <stdio.h>
#include <stdlib.h>
#include <Wlz.h>

int             main(char *argv[], int argc)
{
  WlzDVertex3   cOfMass3D;
  WlzObject     *inObj = NULL;
  WlzErrorNum   errNum = WLZ_ERR_NONE;

  if((inObj= WlzReadObj(stdin, &errNum)) == NULL)
  {
    (void )fprintf(stderr, "%s: Failed to read input object.\n", *argv);
  }
  else
  {
    cOfMass3D = WlzCentreOfMass3D(inObj, 0, NULL, &errNum);
    WlzFreeObj(inObj);
    if(errNum == WLZ_ERR_NONE)
    {
      (void )ptintf("%g %g %g\n",
                    cOfMass3D.vtX, cOfMass3D.vtY, cOfMass3D.vtZ);
    }
    else
    {
      (void )fprintf(stderr,
                     "%s: Failed to calculate centre of mass.\n",
                     *argv);
    }
  }
  return(errNum);
}
.fi
.cs R
.ps +2
.SH SEE ALSO
WlzCentreOfMass(1), WlzPrincipalAngle(3), WlzError(3)
.SH BUGS
Still to be found.
